# แบบฝึกหัดเพิ่มเติม: pandas

เครดิต: Akara Supratak (email: [akara.sup@mahidol.ac.th](mailto:akara.sup@mahidol.ac.th), github: [@akaraspt](https://github.com/akaraspt))

สมมติว่าใช้ `import pandas as pd` และ `df` คือ DataFrame ที่อ่านมาจาก `data.csv` [[ดาวน์โหลด](https://raw.githubusercontent.com/MUICT-Programming/itds120-extra-exercises/refs/heads/main/data.csv)]

คอลัมน์ที่มักพบในแบบฝึกหัด: `['Name','Sex','Age','Pclass','Fare','Embarked']` (ปรับตามไฟล์ของคุณได้)

## pandas คืออะไร (What is pandas?)

### ทำไมเราจึงใช้ pandas DataFrame สำหรับข้อมูลแบบตาราง

เลือกคำตอบที่ถูกต้องที่สุด

* [ ] A. เพราะ pandas จัดการกับข้อมูลที่ขาดหายโดยอัตโนมัติ
* [ ] B. เพราะ DataFrame มีคอลัมน์แบบมีชื่อ สามารถประมวลผลแบบเวกเตอร์ได้รวดเร็ว และมีฟังก์ชันสำหรับกรอง จัดเรียง และจัดกลุ่มข้อมูลได้หลากหลาย
* [ ] C. เพราะไฟล์ CSV อ่านได้ด้วย pandas เท่านั้น
* [ ] D. เพราะ DataFrame ใช้หน่วยความจำน้อยกว่า NumPy เสมอ
* [ ] E. เพราะ pandas ทำให้ไม่ต้องเข้าใจ Python อีกต่อไป

## การเลือกคอลัมน์และแถว (Selecting Columns and Rows)

### เติมคำในช่องว่าง: เลือกคอลัมน์ที่ระบุ

เลือกเฉพาะคอลัมน์ `Name`, `Age`, และ `Fare`

```python
subset = df[___________]
```

เลือก 5 แถวแรกของคอลัมน์เหล่านั้น

```python
head5 = subset.___________
```

### การเลือกแถวตามตำแหน่งด้วย `iloc`

สมมติว่า `df` มีอย่างน้อย 120 แถว
เลือกแถวที่ 100–109 (10 แถว) และแสดงเฉพาะคอลัมน์ `Name` และ `Age`

```python
part = df.iloc[___________][[___________]]
```

เลือกแถวแรกสุดเป็น Series

```python
row0 = df.iloc[___________]
```

เลือกแถวที่ 0, 2, และ 4 และเฉพาะคอลัมน์ `Pclass` และ `Fare`

```python
pick = df.iloc[[___________]][[___________]]
```

## การกรองข้อมูลตามเงื่อนไข (`&`, `|`, `~`)

### เติมเงื่อนไขให้สมบูรณ์

เลือกผู้โดยสารที่มี `Age >= 18` และ `Fare > 100`

```python
adults_rich = df[___________]
```

เลือกแถวที่ `Embarked` ไม่ใช่ `'S'` (ใช้ `~` กับเงื่อนไข)

```python
not_S = df[___________]
```

เลือกผู้โดยสารที่อยู่ใน `Pclass` 1 หรือมี `Fare >= 200`

```python
vip = df[___________]
```

> หมายเหตุ: ทุกครั้งที่ใช้ `&`, `|`, หรือ `~` ให้ใส่วงเล็บรอบเงื่อนไขแต่ละส่วนเสมอ

## การค้นหาสตริงด้วย `.str.contains`

### การค้นหาชื่อโดยไม่สนใจตัวพิมพ์ใหญ่/เล็ก

เลือกแถวที่ `Name` มีคำว่า `"john"` (ไม่สนใจตัวพิมพ์)
แล้วแสดงคอลัมน์ `['Name','Age','Embarked']` สำหรับ 10 แถวแรก

```python
mask = df['Name'].str.contains('john', case=______, na=______)
out  = df[mask][___________].head(______)
```

คำแนะนำ:

* การไม่สนใจตัวพิมพ์ = `case=False`
  การสนใจตัวพิมพ์ = `case=True`
* ใช้ `na=False` เพื่อไม่ให้ข้อมูลที่หายไปถูกนับเป็นผลลัพธ์ที่ตรง

## การตรวจสอบค่าที่อยู่ในชุดข้อมูลด้วย `.isin`

### กรองข้อมูลจากชุดของค่า

เก็บเฉพาะแถวที่ `Embarked` อยู่ใน `{ 'S', 'C' }`
และแสดง 8 แถวแรกของ `['Embarked','Pclass','Fare']`

```python
subset = df[df['Embarked'].isin(___________)][[___________]].head(___________)
```

## การนับความถี่ด้วย `value_counts()` และ `unique()`

### นับจำนวนหมวดหมู่

แสดงจำนวนของแต่ละค่าที่ปรากฏใน `Sex` (จากมากไปน้อย)

```python
counts = df['Sex'].___________
```

แสดงค่าที่ไม่ซ้ำใน `Embarked` ตามลำดับที่พบ

```python
uniq = df['Embarked'].___________
```

## การจัดเรียงข้อมูลด้วย `sort_values()`

### การจัดเรียงด้วยคีย์เดียวและหลายคีย์

จัดเรียงตาม `Fare` จากมากไปน้อย
และแสดงคอลัมน์ `['Name','Fare']` สำหรับ 5 แถวแรก

```python
top_fare = df.sort_values(___________)[___________].head(___________)
```

จัดเรียงตาม `Embarked` (น้อย→มาก) จากนั้นตาม `Fare` (มาก→น้อย)
และแสดง 5 แถวสุดท้ายของ `['Embarked','Fare','Name']`

```python
tail5 = df.sort_values(___________)[___________].tail(___________)
```

## แบบฝึกหัดเขียนโค้ดสั้น (Short Coding Tasks)

ไฟล์ `data.csv` สามารถดาวน์โหลดได้จาก
[[ดาวน์โหลด](https://raw.githubusercontent.com/MUICT-Programming/itds120-extra-exercises/refs/heads/main/data.csv)]

### การเลือกคอลัมน์พื้นฐานและดูตัวอย่าง (Basic column selection and preview)

อ่าน `data.csv`, เลือกคอลัมน์ `['Pclass','Sex','Age','Fare','Embarked']`,
แล้วพิมพ์ 5 แถวแรก

---

### การเลือกแถวและคอลัมน์ด้วย `iloc`

พิมพ์แถวที่ 50–59 (10 แถว) โดยแสดงเฉพาะ `['Name','Age','Pclass']` ตามลำดับเดิม

---

### การกรองด้วยหลายเงื่อนไข (Combined conditions)

พิมพ์ `['Name','Age','Fare','Embarked']` ของผู้โดยสารที่:

* `Age >= 18`
* `Fare` อยู่ระหว่าง 50 ถึง 150 (รวมค่าต่ำสุด แต่ไม่รวมค่าสูงสุด)
* `Embarked` ไม่ใช่ `'UNK'`

---

### การค้นหาสตริง (String matching)

พิมพ์ 12 แถวแรกของ `['Name','Pclass','Embarked']`
ที่ `Name` มีคำว่า `"anna"` (ไม่สนใจตัวพิมพ์)

คำแนะนำ:

* `.str.contains` ใช้สำหรับค้นหาคำย่อยในสตริง
* กำหนดว่าต้องการให้สนใจตัวพิมพ์หรือไม่ด้วยพารามิเตอร์ `case`

  * สนใจตัวพิมพ์: `case=True`
  * ไม่สนใจตัวพิมพ์: `case=False`
* ใช้ `na=False` เพื่อไม่ให้ค่าที่หายไปปรากฏในผลลัพธ์

---

### การกรองด้วย `.isin` (Membership filtering)

เก็บเฉพาะแถวที่ `Embarked` อยู่ใน `{ 'S', 'Q' }`
และพิมพ์ 10 แถวแรกของ `['Embarked','Pclass','Fare']`
โดยจัดเรียงตาม `Pclass` (น้อย→มาก) และ `Fare` (มาก→น้อย)

---

### การนับและแสดงค่าที่ไม่ซ้ำ (Value counts and unique values)

พิมพ์จำนวนของแต่ละค่าที่ปรากฏใน `Embarked` (จากมากไปน้อย)
และแสดงค่าที่ไม่ซ้ำในลำดับที่พบ

---

### การจัดเรียงหลายคีย์พร้อมเงื่อนไข (Multi-key sorting with a condition)

เลือกแถวที่ `Age` ไม่เป็นค่าว่างและ `Age >= 16`,
จากนั้นจัดเรียงตาม `Embarked` (น้อย→มาก) และ `Fare` (มาก→น้อย)
พิมพ์ `['Name','Embarked','Fare','Age']` สำหรับ 15 แถวแรก

---

### สองวิธีในการหาค่าที่พบบ่อยที่สุด (Two ways to get “top N by frequency”)

แสดง 3 ค่าของ `Embarked` ที่พบบ่อยที่สุด พร้อมจำนวนครั้งที่ปรากฏ
